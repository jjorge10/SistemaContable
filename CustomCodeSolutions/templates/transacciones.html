<!DOCTYPE html>
<html>
<head>
    <title>Registrar y Ver Transacciones</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <style>
        /* styles.css */
.form-row {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}
.form-row label, .form-row input {
    flex: 1;
}
.contenedor {
    display: flex;
    margin-left: 20px;
    align-items: center;    /* Centra verticalmente */
    height: 45vh;          /* Opcional, ajusta la altura del contenedor según tus necesidades */
}
label {
    width: 150px; /* Define un ancho fijo para las etiquetas */
    /* O puedes usar porcentajes para definir el ancho relativo:
    width: 30%;
    */
    display: inline-block; /* Para que las etiquetas se muestren en línea y tengan el ancho especificado */
}
    </style>
</head>

<body>
    
    <h1>Registrar y Ver Transacciones</h1>
    <br>
    
    <a class="btn btn-primary" href="{% url 'inicio' %}" role="button">Regresar</a>
    <div class="contenedor">
        <form method="post" id="transaccion-form">
            {% csrf_token %}

      <!--      {{ form.num_transaccion.errors }}
            <div class="form-row">
                <label for="{{ form.num_transaccion.id_for_label }}">Num. Transacción:</label>
                {{ form.num_transaccion }}
            </div>

            {{ form.descripcion.errors }}
            <div class="form-row">
                <label for="{{ form.descripcion.id_for_label }}">Descripción:</label>
                {{ form.descripcion }}
            </div>
            
            {{ form.fecha.errors }}
            <div class="form-row">
                <label for="{{ form.fecha.id_for_label }}">Fecha:</label>
                {{ form.fecha }}
            </div>
<!Cuenta Transaccion----------------------------------------------------------------------------------------------

            {{ formct.cod_cuenta.errors }}
            <div class="form-row">
                <label for="{{ form.cod_cuenta.id_for_label }}">Cuenta:</label>
                {{ formct.cod_cuenta }}
            </div>

            {{ formct.debe.errors }}
            <div class="form-row">
                <label for="{{ formct.debe.id_for_label }}">Debe:</label>
                {{ formct.debe }}
            </div>
            
            {{ formct.haber.errors }}
            <div class="form-row">
                <label for="{{ formct.haber.id_for_label }}">Haber:</label>
                {{ formct.haber }}
            </div>
        -->
<!------------------------------------------------------------------------------------------->
            <div class="container px-4 text-center">
                <div class="row gx-5">
                <div class="col">
                <div class="p-3">

                    {{ form.num_transaccion.errors }}
                    <div class="form-row">
                        <label for="{{ form.num_transaccion.id_for_label }}">Num. Transacción:</label>
                        {{ form.num_transaccion }}
                    </div>

                    {{ form.descripcion.errors }}
                    <div class="form-row">
                        <label for="{{ form.descripcion.id_for_label }}">Descripción:</label>
                        {{ form.descripcion }}
                    </div>
                    
                    {{ form.fecha.errors }}
                    <div class="form-row">
                        <label for="{{ form.fecha.id_for_label }}">Fecha:</label>
                        {{ form.fecha }}
                    </div>
                </div>
                </div>
                <!----------------------------------------------------------------------------------------------->
                    {% for cuenta_form in formct %}
                    <div class="col">
                        <div class="p-3">
                            {{ cuenta_form.cod_cuenta.errors }}
                            <div class="form-row">
                                <label for="{{ cuenta_form.cod_cuenta.id_for_label }}">Cuenta:</label>
                                {{ cuenta_form.cod_cuenta }}
                            </div>
                            
                            {% if forloop.counter == 1 %}
                            <label for="{{ cuenta_form.debe.id_for_label }}">Debe:</label>
                            {{ cuenta_form.debe }}
                            {% else %}
                            <label for="{{ cuenta_form.haber.id_for_label }}">Haber:</label>
                            {{ cuenta_form.haber }}
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                

                <!--------------------------------------------------------------------------------->
                
            
                <!-------------------------------------------------------------------------------------------->
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Guardar Transacción</button>
        </form>
        
    </div>
    
    <h2>Transacciones Guardadas</h2>
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Numero</th>
                <th>Descripción</th>
                <th>Total Debe</th>
                <th>Total Haber</th>
                <th>Acciones</th> 
            </tr>
        </thead>
        <tbody>
            {% for transaccion in transacciones %}
            <tr>
                <td>{{ transaccion.fecha }}</td>
                <td>{{ transaccion.num_transaccion }}</td>
                <td>{{ transaccion.descripcion }}</td>
                <td>{{ transaccion.total_debe_tran }}</td>
                <td>{{ transaccion.total_haber_tran }}</td>
                <td>
                    <a href="/eliminarTransaccion/{{transaccion.num_transaccion}}" class="btn btn-danger btn-sm">Eliminar</a>
                </td>          
            </tr>
            {% endfor %}
        </tbody>
    </table>

   <!-- <script>
        document.addEventListener('DOMContentLoaded', function() {
            const formulario = document.getElementById('transaccion-form');
    
            formulario.addEventListener('submit', function(event) {
                event.preventDefault();  // Evita el envío del formulario
    
                const formData = new FormData(formulario);
    
                // Convierte los datos del formulario en un objeto JavaScript
                const formDataObject = {};
                formData.forEach((value, key) => {
                    formDataObject[key] = value;
                });
    
                console.log('Datos del formulario POST:', formDataObject);
            });
        });
    </script> -->
    
    
</body>
</html>

